CREATE Table Branch( 
BranchNo VARCHAR(4) PRIMARY KEY, 
Street VARCHAR(15) Not Null, 
City VARCHAR(15) Not Null, 
PostCode VARCHAR(5) Not Null
);

CREATE Table Staff ( 
StaffNo VARCHAR(5) PRIMARY KEY, 
FName VARCHAR(15) Not Null, 
LName VARCHAR(15) Not Null, 
Position VARCHAR(15) Not Null, 
sex char constraint Staff_sexCHK check (sex IN ('M','F')), 
DOB Date, 
Salary DECIMAL(9,2) Not Null, 
BranchNo VARCHAR(4),
FOREIGN KEY(BranchNo) REFERENCES Branch(BranchNo)
);

CREATE Table PrivateOwner( 
OwnerNo VARCHAR(5) PRIMARY KEY ,
fName VARCHAR(15) Not Null, 
lName VARCHAR(15) Not Null,
address VARCHAR(50) Not Null,
telNo VARCHAR(13) Not Null
);


CREATE Table PropertyForRent( 
PropertyNo VARCHAR(5) PRIMARY KEY, 
Street VARCHAR(15) Not Null, 
City VARCHAR(15) Not Null, 
PostCode VARCHAR(8) Not Null, 
PropertyType VARCHAR(15) Not Null, 
Rooms SMALLINT Not Null, 
Rent DECIMAL(5,1) Not Null,
OwnerNo VARCHAR(5), 
StaffNo VARCHAR(5),
BranchNo VARCHAR(4),
FOREIGN KEY (OwnerNo) REFERENCES PrivateOwner (OwnerNo),
FOREIGN KEY (StaffNo) REFERENCES Staff (StaffNo), 
FOREIGN KEY (BranchNo) REFERENCES Branch (BranchNo)
);

CREATE Table Client( 
ClientNo VARCHAR(5) PRIMARY KEY ,
fName VARCHAR(15) Not Null, 
lName VARCHAR(15) Not Null, 
telNo Varchar(11) Not Null, 
prefType VARCHAR(15) Not Null, 
MaxRent DECIMAL(5,1) Not Null
);

CREATE Table Viewing ( 
ClientNo VARCHAR(5) Not Null,
PropertyNo VARCHAR(5) Not Null, 
PRIMARY KEY(ClientNo ,PropertyNo), 
FOREIGN KEY (ClientNo) REFERENCES Client (ClientNo),
FOREIGN KEY (PropertyNo) REFERENCES PropertyForRent (PropertyNo) , 
viewDate Date Not Null, 
Comments VARCHAR(50)
);

CREATE Table Registration(
ClientNo VARCHAR(5) Not Null,
BranchNo VARCHAR(4),
StaffNo VARCHAR(5),
PRIMARY KEY(ClientNo ,BranchNo, StaffNo),
dateJoined Date Not Null,
FOREIGN KEY (StaffNo) REFERENCES Staff (StaffNo), 
FOREIGN KEY(BranchNo) REFERENCES Branch (BranchNo),
FOREIGN KEY (ClientNo) REFERENCES Client (ClientNo)
);
 
